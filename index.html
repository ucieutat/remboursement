<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reste à rembourser — Compteur</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#10b981;--muted:#94a3b8;--glass:rgba(255,255,255,0.04)}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{display:grid;place-items:center;background:linear-gradient(180deg,#071022 0%,#081226 60%);color:#e6eef6}
    .card{width:min(720px,94vw);padding:36px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:0 8px 32px rgba(2,6,23,0.6);backdrop-filter:blur(6px);display:flex;flex-direction:column;align-items:center;gap:18px}
    h1{margin:0;font-size:18px;color:var(--muted);font-weight:600}
    .amount{font-size:64px;font-weight:700;line-height:1;display:flex;align-items:baseline;gap:8px}
    .euro{font-size:28px;opacity:0.95}
    .label{color:var(--muted);font-weight:500}
    footer{font-size:13px;color:var(--muted);width:100%;text-align:center;margin-top:6px}
  </style>
</head>
<body>
  <div class="card" role="main">
    <h1>Reste à rembourser</h1>
    <div class="amount" id="display">
      <span id="value">0</span>
      <span class="euro">€</span>
    </div>
    <div class="label">Montant restant</div>
    <footer>Bisous je vous aime</footer>
  </div>

  <script>
    // Version avec JSONBin.io pour partager le montant global
    // Remplace YOUR_BIN_ID et YOUR_API_KEY par tes infos JSONBin
    const BIN_ID = '69314c99d0ea881f4012141c';
    const API_KEY = '$2a$10$x48NcilCm7gv7Lfi954toef9A/YfzjZTOf7rdSgktC6ZN7cXb9LN2';
    const displayEl = document.getElementById('value');

    async function fetchAmount(){
      try{
        const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
          headers: { 'X-Master-Key': API_KEY }
        });
        const data = await res.json();
        const amount = parseFloat(data.record.montant) || 0;
        displayEl.textContent = amount.toLocaleString('fr-FR', {minimumFractionDigits:0, maximumFractionDigits:0});
      } catch(e){
        console.error('Erreur JSONBin:', e);
        displayEl.textContent = '0';
      }
    }

    fetchAmount();
  </script>
</body>
</html>

